(function(h,j,f){var c=(function(){return(h.requestAnimationFrame||h.webkitRequestAnimationFrame||h.mozRequestAnimationFrame||h.oRequestAnimationFrame||function(l){return h.setTimeout(l,1000/60)})})();var g=(function(){return(h.cancelAnimationFrame||h.webkitCancelAnimationFrame||h.mozCancelAnimationFrame||h.oCancelAnimationFrame||function(l){h.clearTimeout(l)})})();var i=function(n){var l=[];n=n.originalEvent||n||h.e;n=n.touches&&n.touches.length?n.touches:n.changedTouches&&n.changedTouches.length?n.changedTouches:[n];for(var m in n){if(n[m].pageX){l.push({x:n[m].pageX,y:n[m].pageY})}else{if(n[m].clientX){l.push({x:n[m].clientX,y:n[m].clientY})}}}return l};var a=function(l,m,n){if(!m||!l){return 0}if(n==="x"){return l.x-m.x}else{if(n==="y"){return l.y-m.y}}return Math.sqrt(Math.pow(l.x-m.x,2)+Math.pow(l.y-m.y,2))};var d=function(m){if(m.is('a,area,button,[role="button"],input,label,select,summary,textarea,video,audio')||f.isFunction(m.get(0).onclick)||m.data("selectable")){return true}for(var l=0,p=m[0].attributes,o=p.length;l<o;l++){if(p[l].nodeName.substr(0,14)==="data-fancybox-"){return true}}return false};var b=function(p){var m=h.getComputedStyle(p)["overflow-y"],o=h.getComputedStyle(p)["overflow-x"],n=(m==="scroll"||m==="auto")&&p.scrollHeight>p.clientHeight,l=(o==="scroll"||o==="auto")&&p.scrollWidth>p.clientWidth;return n||l};var e=function(l){var m=false;while(true){m=b(l.get(0));if(m){break}l=l.parent();if(!l.length||l.hasClass("fancybox-stage")||l.is("body")){break}}return m};var k=function(l){var m=this;m.instance=l;m.$bg=l.$refs.bg;m.$stage=l.$refs.stage;m.$container=l.$refs.container;m.destroy();m.$container.on("touchstart.fb.touch mousedown.fb.touch",f.proxy(m,"ontouchstart"))};k.prototype.destroy=function(){this.$container.off(".fb.touch")};k.prototype.ontouchstart=function(r){var n=this,m=f(r.target),l=n.instance,q=l.current,p=q.$content,o=r.type=="touchstart";if(o){n.$container.off("mousedown.fb.touch")}if(r.originalEvent&&r.originalEvent.button==2){return}if(!m.length||d(m)||d(m.parent())){return}if(!m.is("img")&&r.originalEvent.clientX>m[0].clientWidth+m.offset().left){return}if(!q||l.isAnimating||l.isClosing){r.stopPropagation();r.preventDefault();return}n.realPoints=n.startPoints=i(r);if(!n.startPoints.length){return}r.stopPropagation();n.startEvent=r;n.canTap=true;n.$target=m;n.$content=p;n.opts=q.opts.touch;n.isPanning=false;n.isSwiping=false;n.isZooming=false;n.isScrolling=false;n.startTime=new Date().getTime();n.distanceX=n.distanceY=n.distance=0;n.canvasWidth=Math.round(q.$slide[0].clientWidth);n.canvasHeight=Math.round(q.$slide[0].clientHeight);n.contentLastPos=null;n.contentStartPos=f.fancybox.getTranslate(n.$content)||{top:0,left:0};n.sliderStartPos=n.sliderLastPos||f.fancybox.getTranslate(q.$slide);n.stagePos=f.fancybox.getTranslate(l.$refs.stage);n.sliderStartPos.top-=n.stagePos.top;n.sliderStartPos.left-=n.stagePos.left;n.contentStartPos.top-=n.stagePos.top;n.contentStartPos.left-=n.stagePos.left;f(j).off(".fb.touch").on(o?"touchend.fb.touch touchcancel.fb.touch":"mouseup.fb.touch mouseleave.fb.touch",f.proxy(n,"ontouchend")).on(o?"touchmove.fb.touch":"mousemove.fb.touch",f.proxy(n,"ontouchmove"));if(f.fancybox.isMobile){j.addEventListener("scroll",n.onscroll,true)}if(!(n.opts||l.canPan())||!(m.is(n.$stage)||n.$stage.find(m).length)){if(m.is(".fancybox-image")){r.preventDefault()}return}if(!(f.fancybox.isMobile&&(e(m)||e(m.parent())))){r.preventDefault()}if(n.startPoints.length===1||q.hasError){if(n.instance.canPan()){f.fancybox.stop(n.$content);n.$content.css("transition-duration","");n.isPanning=true}else{n.isSwiping=true}n.$container.addClass("fancybox-controls--isGrabbing")}if(n.startPoints.length===2&&q.type==="image"&&(q.isLoaded||q.$ghost)){n.canTap=false;n.isSwiping=false;n.isPanning=false;n.isZooming=true;f.fancybox.stop(n.$content);n.$content.css("transition-duration","");n.centerPointStartX=(n.startPoints[0].x+n.startPoints[1].x)*0.5-f(h).scrollLeft();n.centerPointStartY=(n.startPoints[0].y+n.startPoints[1].y)*0.5-f(h).scrollTop();n.percentageOfImageAtPinchPointX=(n.centerPointStartX-n.contentStartPos.left)/n.contentStartPos.width;n.percentageOfImageAtPinchPointY=(n.centerPointStartY-n.contentStartPos.top)/n.contentStartPos.height;n.startDistanceBetweenFingers=a(n.startPoints[0],n.startPoints[1])}};k.prototype.onscroll=function(m){var l=this;l.isScrolling=true;j.removeEventListener("scroll",l.onscroll,true)};k.prototype.ontouchmove=function(n){var m=this,l=f(n.target);if(n.originalEvent.buttons!==undefined&&n.originalEvent.buttons===0){m.ontouchend(n);return}if(m.isScrolling||!(l.is(m.$stage)||m.$stage.find(l).length)){m.canTap=false;return}m.newPoints=i(n);if(!(m.opts||m.instance.canPan())||!m.newPoints.length||!m.newPoints.length){return}if(!(m.isSwiping&&m.isSwiping===true)){n.preventDefault()}m.distanceX=a(m.newPoints[0],m.startPoints[0],"x");m.distanceY=a(m.newPoints[0],m.startPoints[0],"y");m.distance=a(m.newPoints[0],m.startPoints[0]);if(m.distance>0){if(m.isSwiping){m.onSwipe(n)
}else{if(m.isPanning){m.onPan()}else{if(m.isZooming){m.onZoom()}}}}};k.prototype.onSwipe=function(o){var m=this,l=m.isSwiping,n=m.sliderStartPos.left||0,p;if(l===true){if(Math.abs(m.distance)>10){m.canTap=false;if(m.instance.group.length<2&&m.opts.vertical){m.isSwiping="y"}else{if(m.instance.isDragging||m.opts.vertical===false||(m.opts.vertical==="auto"&&f(h).width()>800)){m.isSwiping="x"}else{p=Math.abs(Math.atan2(m.distanceY,m.distanceX)*180/Math.PI);m.isSwiping=p>45&&p<135?"y":"x"}}m.canTap=false;if(m.isSwiping==="y"&&f.fancybox.isMobile&&(e(m.$target)||e(m.$target.parent()))){m.isScrolling=true;return}m.instance.isDragging=m.isSwiping;m.startPoints=m.newPoints;f.each(m.instance.slides,function(r,q){f.fancybox.stop(q.$slide);q.$slide.css("transition-duration","");q.inTransition=false;if(q.pos===m.instance.current.pos){m.sliderStartPos.left=f.fancybox.getTranslate(q.$slide).left-f.fancybox.getTranslate(m.instance.$refs.stage).left}});if(m.instance.SlideShow&&m.instance.SlideShow.isActive){m.instance.SlideShow.stop()}}return}if(l=="x"){if(m.distanceX>0&&(m.instance.group.length<2||(m.instance.current.index===0&&!m.instance.current.opts.loop))){n=n+Math.pow(m.distanceX,0.8)}else{if(m.distanceX<0&&(m.instance.group.length<2||(m.instance.current.index===m.instance.group.length-1&&!m.instance.current.opts.loop))){n=n-Math.pow(-m.distanceX,0.8)}else{n=n+m.distanceX}}}m.sliderLastPos={top:l=="x"?0:m.sliderStartPos.top+m.distanceY,left:n};if(m.requestId){g(m.requestId);m.requestId=null}m.requestId=c(function(){if(m.sliderLastPos){f.each(m.instance.slides,function(r,q){var s=q.pos-m.instance.currPos;f.fancybox.setTranslate(q.$slide,{top:m.sliderLastPos.top,left:m.sliderLastPos.left+s*m.canvasWidth+s*q.opts.gutter})});m.$container.addClass("fancybox-is-sliding")}})};k.prototype.onPan=function(){var l=this;if(a(l.newPoints[0],l.realPoints[0])<(f.fancybox.isMobile?10:5)){l.startPoints=l.newPoints;return}l.canTap=false;l.contentLastPos=l.limitMovement();if(l.requestId){g(l.requestId);l.requestId=null}l.requestId=c(function(){f.fancybox.setTranslate(l.$content,l.contentLastPos)})};k.prototype.limitMovement=function(){var A=this;var o=A.canvasWidth;var r=A.canvasHeight;var z=A.distanceX;var y=A.distanceY;var l=A.contentStartPos;var w=l.left;var t=l.top;var m=l.width;var n=l.height;var q,p,x,v,u,s;if(m>o){u=w+z}else{u=w}s=t+y;q=Math.max(0,o*0.5-m*0.5);p=Math.max(0,r*0.5-n*0.5);x=Math.min(o-m,o*0.5-m*0.5);v=Math.min(r-n,r*0.5-n*0.5);if(z>0&&u>q){u=q-1+Math.pow(-q+w+z,0.8)||0}if(z<0&&u<x){u=x+1-Math.pow(x-w-z,0.8)||0}if(y>0&&s>p){s=p-1+Math.pow(-p+t+y,0.8)||0}if(y<0&&s<v){s=v+1-Math.pow(v-t-y,0.8)||0}return{top:s,left:u}};k.prototype.limitPosition=function(r,p,q,m){var n=this;var l=n.canvasWidth;var o=n.canvasHeight;if(q>l){r=r>0?0:r;r=r<l-q?l-q:r}else{r=Math.max(0,l/2-q/2)}if(m>o){p=p>0?0:p;p=p<o-m?o-m:p}else{p=Math.max(0,o/2-m/2)}return{top:p,left:r}};k.prototype.onZoom=function(){var u=this;var p=u.contentStartPos;var r=p.width;var o=p.height;var A=p.left;var y=p.top;var x=a(u.newPoints[0],u.newPoints[1]);var q=x/u.startDistanceBetweenFingers;var s=Math.floor(r*q);var w=Math.floor(o*q);var m=(r-s)*u.percentageOfImageAtPinchPointX;var l=(o-w)*u.percentageOfImageAtPinchPointY;var D=(u.newPoints[0].x+u.newPoints[1].x)/2-f(h).scrollLeft();var B=(u.newPoints[0].y+u.newPoints[1].y)/2-f(h).scrollTop();var v=D-u.centerPointStartX;var t=B-u.centerPointStartY;var C=A+(m+v);var z=y+(l+t);var n={top:z,left:C,scaleX:q,scaleY:q};u.canTap=false;u.newWidth=s;u.newHeight=w;u.contentLastPos=n;if(u.requestId){g(u.requestId);u.requestId=null}u.requestId=c(function(){f.fancybox.setTranslate(u.$content,u.contentLastPos)})};k.prototype.ontouchend=function(r){var n=this;var m=Math.max(new Date().getTime()-n.startTime,1);var l=n.isSwiping;var o=n.isPanning;var p=n.isZooming;var q=n.isScrolling;n.endPoints=i(r);n.$container.removeClass("fancybox-controls--isGrabbing");f(j).off(".fb.touch");j.removeEventListener("scroll",n.onscroll,true);if(n.requestId){g(n.requestId);n.requestId=null}n.isSwiping=false;n.isPanning=false;n.isZooming=false;n.isScrolling=false;n.instance.isDragging=false;if(n.canTap){return n.onTap(r)}n.speed=366;n.velocityX=n.distanceX/m*0.5;n.velocityY=n.distanceY/m*0.5;n.speedX=Math.max(n.speed*0.5,Math.min(n.speed*1.5,1/Math.abs(n.velocityX)*n.speed));if(o){n.endPanning()}else{if(p){n.endZooming()}else{n.endSwiping(l,q)}}return};k.prototype.endSwiping=function(m,p){var n=this,o=false,l=n.instance.group.length;n.sliderLastPos=null;if(m=="y"&&!p&&Math.abs(n.distanceY)>50){f.fancybox.animate(n.instance.current.$slide,{top:n.sliderStartPos.top+n.distanceY+n.velocityY*150,opacity:0},200);o=n.instance.close(true,200)}else{if(m=="x"&&n.distanceX>50&&l>1){o=n.instance.previous(n.speedX)}else{if(m=="x"&&n.distanceX<-50&&l>1){o=n.instance.next(n.speedX)}}}if(o===false&&(m=="x"||m=="y")){if(p||l<2){n.instance.centerSlide(n.instance.current,150)}else{n.instance.jumpTo(n.instance.current.index)}}n.$container.removeClass("fancybox-is-sliding")
};k.prototype.endPanning=function(){var l=this;var o,n,m;if(!l.contentLastPos){return}if(l.opts.momentum===false){o=l.contentLastPos.left;n=l.contentLastPos.top}else{o=l.contentLastPos.left+l.velocityX*l.speed;n=l.contentLastPos.top+l.velocityY*l.speed}m=l.limitPosition(o,n,l.contentStartPos.width,l.contentStartPos.height);m.width=l.contentStartPos.width;m.height=l.contentStartPos.height;f.fancybox.animate(l.$content,m,330)};k.prototype.endZooming=function(){var m=this;var s=m.instance.current;var r,o,n,q;var p=m.newWidth;var l=m.newHeight;if(!m.contentLastPos){return}r=m.contentLastPos.left;o=m.contentLastPos.top;q={top:o,left:r,width:p,height:l,scaleX:1,scaleY:1};f.fancybox.setTranslate(m.$content,q);if(p<m.canvasWidth&&l<m.canvasHeight){m.instance.scaleToFit(150)}else{if(p>s.width||l>s.height){m.instance.scaleToActual(m.centerPointStartX,m.centerPointStartY,150)}else{n=m.limitPosition(r,o,p,l);f.fancybox.setTranslate(m.$content,f.fancybox.getTranslate(m.$content));f.fancybox.animate(m.$content,n,150)}}};k.prototype.onTap=function(q){var t=this;var o=f(q.target);var s=t.instance;var r=s.current;var n=(q&&i(q))||t.startPoints;var l=n[0]?n[0].x-f(h).scrollLeft()-t.stagePos.left:0;var u=n[0]?n[0].y-f(h).scrollTop()-t.stagePos.top:0;var p;var m=function(w){var v=r.opts[w];if(f.isFunction(v)){v=v.apply(s,[r,q])}if(!v){return}switch(v){case"close":s.close(t.startEvent);break;case"toggleControls":s.toggleControls(true);break;case"next":s.next();break;case"nextOrClose":if(s.group.length>1){s.next()}else{s.close(t.startEvent)}break;case"zoom":if(r.type=="image"&&(r.isLoaded||r.$ghost)){if(s.canPan()){s.scaleToFit()}else{if(s.isScaledDown()){s.scaleToActual(l,u)}else{if(s.group.length<2){s.close(t.startEvent)}}}}break}};if(q.originalEvent&&q.originalEvent.button==2){return}if(!o.is("img")&&l>o[0].clientWidth+o.offset().left){return}if(o.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container")){p="Outside"}else{if(o.is(".fancybox-slide")){p="Slide"}else{if(s.current.$content&&s.current.$content.find(o).addBack().filter(o).length){p="Content"}else{return}}}if(t.tapped){clearTimeout(t.tapped);t.tapped=null;if(Math.abs(l-t.tapX)>50||Math.abs(u-t.tapY)>50){return this}m("dblclick"+p)}else{t.tapX=l;t.tapY=u;if(r.opts["dblclick"+p]&&r.opts["dblclick"+p]!==r.opts["click"+p]){t.tapped=setTimeout(function(){t.tapped=null;m("click"+p)},500)}else{m("click"+p)}}return this};f(j).on("onActivate.fb",function(m,l){if(l&&!l.Guestures){l.Guestures=new k(l)}})})(window,document,window.jQuery||jQuery);