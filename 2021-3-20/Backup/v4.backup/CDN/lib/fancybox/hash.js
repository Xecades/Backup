(function(b,e,f){if(!f.escapeSelector){f.escapeSelector=function(i){var g=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;var h=function(k,j){if(j){if(k==="\0"){return"\uFFFD"}return k.slice(0,-1)+"\\"+k.charCodeAt(k.length-1).toString(16)+" "}return"\\"+k};return(i+"").replace(g,h)}}function a(){var j=e.location.hash.substr(1),i=j.split("-"),h=i.length>1&&/^\+?\d+$/.test(i[i.length-1])?parseInt(i.pop(-1),10)||1:1,g=i.join("-");return{hash:j,index:h<1?1:h,gallery:g}}function d(g){var h;if(g.gallery!==""){h=f("[data-fancybox='"+f.escapeSelector(g.gallery)+"']").eq(g.index-1).trigger("click.fb-start")}}function c(g){var i,h;if(!g){return false}i=g.current?g.current.opts:g.opts;h=i.hash||(i.$orig?i.$orig.data("fancybox"):"");return h===""?false:h}f(function(){if(f.fancybox.defaults.hash===false){return}f(b).on({"onInit.fb":function(j,g){var i,h;if(g.group[g.currIndex].opts.hash===false){return}i=a();h=c(g);if(h&&i.gallery&&h==i.gallery){g.currIndex=i.index-1}},"beforeShow.fb":function(k,g,j,i){var h;if(!j||j.opts.hash===false){return}h=c(g);if(!h){return}g.currentHash=h+(g.group.length>1?"-"+(j.index+1):"");if(e.location.hash==="#"+g.currentHash){return}if(!g.origHash){g.origHash=e.location.hash}if(g.hashTimer){clearTimeout(g.hashTimer)}g.hashTimer=setTimeout(function(){if("replaceState" in e.history){e.history[i?"pushState":"replaceState"]({},b.title,e.location.pathname+e.location.search+"#"+g.currentHash);if(i){g.hasCreatedHistory=true}}else{e.location.hash=g.currentHash}g.hashTimer=null},300)},"beforeClose.fb":function(j,g,i){var h;if(i.opts.hash===false){return}h=c(g);if(g.currentHash&&g.hasCreatedHistory){e.history.back()}else{if(g.currentHash){if("replaceState" in e.history){e.history.replaceState({},b.title,e.location.pathname+e.location.search+(g.origHash||""))}else{e.location.hash=g.origHash}}}g.currentHash=null;clearTimeout(g.hashTimer)}});f(e).on("hashchange.fb",function(){var g=a(),h;f.each(f(".fancybox-container").get().reverse(),function(i,k){var j=f(k).data("FancyBox");if(j.currentHash){h=j;return false}});if(h){if(h.currentHash&&h.currentHash!==g.gallery+"-"+g.index&&!(g.index===1&&h.currentHash==g.gallery)){h.currentHash=null;h.close()}}else{if(g.gallery!==""){d(g)}}});setTimeout(function(){if(!f.fancybox.getInstance()){d(a())}},50)})})(document,window,window.jQuery||jQuery);