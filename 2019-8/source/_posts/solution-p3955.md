---
title: 题解P3955[图书管理员]
date: 2019-02-13 15:08:02
tags:
 - 题解
 - 模拟
 - 难度★☆☆☆☆
categories:
 - 题解
mathjax: true
toc: true
thumbnail: /gallery/14.jpg
---
## 链接

题目来源：<a href="https://www.luogu.org/problemnew/show/P3955" target="_blank">$P3955$</a>
<!-- more -->
---
## 题目描述

图书馆中每本书都有一个图书编码，可以用于快速检索图书，这个图书编码是一个正整数。每位借书的读者手中有一个需求码，这个需求码也是一个正整数。如果一本书的图 书编码恰好以读者的需求码结尾，那么这本书就是这位读者所需要的。小$D$刚刚当上图书馆的管理员，她知道图书馆里所有书的图书编码，她请你帮她写一个程序，对于每一位读者，求出他所需要的书中图书编码最小的那本书，如果没有他 需要的书，请输出$-1$。

---
## 输入输出格式
### 输入格式

第一行，包含两个正整数$n$,$q$，以一个空格分开，分别代表图书馆里书的数量和读者的数量。

接下来的$n$行，每行包含一个正整数，代表图书馆里某本书的图书编码。

接下来的$q$行，每行包含两个正整数，以一个空格分开，第一个正整数代表图书馆里读者的需求码的长度，第二个正整数代表读者的需求码。

### 输出格式

$q$行，每行包含一个整数，如果存在第$i$个读者所需要的书，则在第$i$行输出第$i$个读者所需要的书中图书编码最小的那本书的图书编码，否则输出$−1$。

---
## 输入输出样例
### 输入样例`#1`
```
5 5 
2123 
1123 
23 
24 
24 
2 23 
3 123 
3 124 
2 12 
2 12
```
### 输出样例`#1`
```
23
1123
-1
-1
-1
```

---
## 说明

【数据规模与约定】
对于$20\%$的数据，$1≤n≤2$。

另有$20\%$的数据，$q=1$。

另有$20\%$的数据，所有读者的需求码的长度均为$1$。

另有$20\%$的数据，所有的图书编码按从小到大的顺序给出。

对于$100\%$的数据，$1≤n≤1,000$,$1≤q≤1,000$，所有的图书编码和需求码均不超过$10,000,000$。

---
## 解答

**这道题，能想到$\%$就赢一大半了**

还记得当时我坐在考场的时候，看着各位神犇，我脑子里一片空白，像$memset(brain,0,sizeof(brain))$一样，胡乱地提交了一个答案……

**结果得了$10$分...**

回来本蒟蒻闲的没事做，再看了一下，~~结合一些题解~~，做出了这个题

以下为变量的意思:

- 我们用$n$来表示$n$(没毛病),即书的数量
- 用$q$来表示读者数量
- $length$表示需求码的长度
- $need$表示读者需要的需求码
- $mod$取出一本书的后几位
- $get[]$为最后输出的最小图书编码
- $book[]$为图书馆已有的书编码
  
### 输入

先输入$n$和$q$:
```cpp
cin>>n>>q;
```
再循环输入图书馆有的书的编码:
```cpp
for(int i=0;i<n;i++)//我喜欢从0开始
    cin>>book[i];
```
$length$和$need$在$q$的循环中输入

> 主体循环内容

应为$get[i]$最后的只要最小,因此可以用"$<$"判断，因此$get[i]$的初始值要最大
那应该是多少呢?题中说需求码最大值为$10000000$,故$get[i]$设为$10000001$即可
这个时候再输入$length$和$need$:
```cpp
cin>>length>>need;
```

### 重点

用$mod$来取图书编码$book$的后$length$位,用$book[j]\%mod$即可,$mod$初始化可以用$pow()$运算:
```cpp
mod=pow(10,length);//10的length次方
```
即
$$mod=10^{length}$$
再依次遍历所以图书编码,进行判断(注意:要保证图书码比候选的大):
```cpp
for(int j=0;j<n;j++)
{
    //这里的%取得后面几个数字
    //如果相等且为最小则进入候选
    if(book[j]%mod==need && book[j]<get[i])
        get[i]=book[j];
}
```

### 填坑

如果没有需求码满足,难不成直接输出$get[i]$即$10000001$吗?肯定不行,按题意要求，输出时再转换为$-1$

### 完整代码

```cpp
//图书管理员.cpp
#include <iostream>
#include <cmath>
using namespace std;

int n,q,length,need,mod,get[1010],book[1010];

int main()
{
    //输入 
    cin>>n>>q;
    for(int i=0;i<n;i++)
        cin>>book[i];
    for(int i=0;i<q;i++)
    {
        //初始置10000001，因为需求码最大值为10000000 
        //判断最小值
        get[i]=10000001;
        cin>>length>>need;//在输入的同时判断，节省空间
        
        mod=pow(10,length);//计算10的length次方
        for(int j=0;j<n;j++)
        {
            //这里的%取得后面几个数字
            //如果相等且为最小则进入候选
            //我看有些题解用sort排序，我觉得没必要
            if(book[j]%mod==need && book[j]<get[i])
                get[i]=book[j];
        }
        if(get[i]==10000001) //这时候再换为-1
            get[i]=-1;
        cout<<get[i]<<endl; //愉快地输出
    }
    return 0;
}
```